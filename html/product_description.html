<!-- <!DOCTYPE html> -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groww - Product Details</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel = "icon" href = "../images/rocket_3.gif" type = "image/x-icon"> 
    <link rel = "stylesheet" href="../styles/navbar.css">
    <link rel = "stylesheet" href="../styles/product_description.css">
    <link rel="stylesheet" href="../styles/buy.css"> 
</head>
<body>

    <nav class="max-w">
        <div class="nav-div">
            <div><a href="home.html"><img class=""
                        src="../images/rocket_3.gif" style="border-radius: 50px;"
                        width="168" height="60" alt="Groww Logo" itemprop="logo"></a>
            </div>

            <div class="c-search">
                <i class="material-icons">search</i><input type="search" id="search"
                    placeholder="What are you looking for today?" />
            </div>

            <div id="thirdBox">
                <a href="loginpage.html"><button id="login-btn">Login/Register</button></a></li>
                <div id="userAcc" class="dontDisplay">
                    <img id="user" src="https://www.shareicon.net/data/2016/05/26/771188_man_512x512.png">
                    <a href="cart.html"><i class="material-icons">shopping_cart</i></a></li>
                </div>
            </div>
        </div>
    </nav>

    <div id="logOutDropDown" class="noDropDownDisplay">
        <div class="logout">Log Out</div>
    </div>
    <div id="dropDown" class="noDropDownDisplay"></div>

    <div id="container">
        
        <div id="leftContainer">
            <div id="titleDetails"></div>
            <div id="graphDetails">
                <div id="grap">
                    <div class="graphDesc">
                        <div id="percentageOne"></div>
                        <div class="percentageDur">3Y annualised</div>
                    </div>
                    <div class="graphDescTwo">
                        <div id="percentageTwo"></div>
                        <div class="percentageDur">1D</div>
                    </div>
                </div>
                <canvas id="myChart"></canvas>
                <!-- <script type="text/javascript">
                    async function fetchdata(){
                        const url= 'https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=IBM&interval=5min&apikey=0PTMBKNK94C4NS65';
                        const response = await fetch(url);
                        const datapoints= await response.json();
                        console.log(datapoints["Time Series (5min)"].keys())
                        // console.log(datapoints);
                 
                        return datapoints;
                    }
                    // fetchdata().then(datapoints => {
                    //     console.log(datapoints[1])
                        // const time = datapoints[1].map(function(index){
                        //         return datapoints[1].index
                        // })
                       
                        // console.log(time)
                    // });
  
                    var ctx = document.getElementById("myChart");
                
                    const data=  {
                        labels: ["9:15", "9:20" , "9:30" , "EE", "ME", "BE"],
                        datasets: [
                          { label: '# of students',
                            data: [105,124,78,91,62,56],
                            backgroundColor :['rgba(255, 99, 132, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(255, 206, 86, 0.2)',
                                    'rgba(75, 192, 192, 0.2)',
                                    'rgba(153, 102, 255, 0.2)',
                                    'rgba(255, 159, 64, 0.2)'
                    ],
                      
                    borderColor: [
                                    'rgba(255,99,132,1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(255, 206, 86, 1)',
                                    'rgba(75, 192, 192, 1)',
                                    'rgba(153, 102, 255, 1)',
                                    'rgba(255, 159, 64, 1)'
                                ],
                    borderWidth : 1
                          }
                        ]
                      };
                      const config={
                        type:'line',
                        data,
                      options: {
                            scales: {
                                yAxes: {
                                
                                        beginAtZero:true
                                
                                }
                            }
                        }
                    }; -->
                   
                      
                        <!-- </script> -->
                <div id="graphInterval">
                    <div id="graphOneYear" class="onclicked" >1D</div>
                    <div id="graphSixMonth" class="oncNotclicked">1M</div>
                    <div id="graphOneMonth" class="onNotclicked">6M</div>
                </div>
            </div>
            </div>
           

        <!-- <div id="rightContainer">
            <div class="rupeeSymbol">â‚¹</div>
            <div id="calendarIcon">
                <i class="material-icons">event</i>
            </div>
            <div class="optBtns">
                <div id="monthlySip" class="whenClicked">MONTHLY SIP</div>
                <div id="oneTime" class="whenNotClicked">ONE-TIME</div>
            </div>
            <div id="paymentOpt"> 
                <div id="sipAmount">
                    <div id="inputLabel">SIP Amount</div>
                    <input type="number" id="sipAmountInput" placeholder="0" max="100000">
                </div>
                <div id="sipCal">
                    <div id="dateLabel">Monthly SIP Date</div>
                    <input type="date" id="sipCalInput" value="2021-11-15" data-date-format="YYYY MM DD" >
                </div>
                <div id="paymentNote">Next SIP Instalment on 15-12-2021</div>
            </div>
            <div class="addToCart">
                <div id="addToCartBtn">ADD TO CART</div>
                <div id="goToCartBtn">GO TO CART</div>
            </div>
        </div> -->
        <div class="container">
            <h1>SELL</h1>
            <form name="registration" class="registartion-form">
              <table>
                <tr>
                  <td><label for="company name">Company name: </label></td>
                  <td><input type="text" name="name" id="company name" placeholder="Enter Name"></td>
                </tr>
                <tr>
                  <td><label for="price">Price: </label></td>
                  <td><input type="text" name="Price" id="Price" placeholder="Enter Price"></td>
                </tr>
                  <td><br>Delivery:<input type="radio" name="select" value="delivery"></td>
                  <td><br>Intraday: <input type="radio" name="select" value="delivery"></td>
                </tr>
                <tr>
                  <td><label for="NSE"><br>NSE:</label></t>
                  <td><input type="NSE" name="NSE" id="NSE" placeholder=" Enter NSE"></td>
                </tr>
                <tr>
                  <td><label for="Limit">Limit:</label></td>
                  <td><input type="Limit" name="Limit" id="Limit" placeholder="Enter Limit"></td>
                </tr>
                <tr>
                  <td><label for="Balance">Balance:</label></td>
                  <td><input type="Balance" name="Balance" id="Balance" value=" "></td>
                </tr>
                <tr>
                  <td colspan="2">----------------------------------------------------</td>
                </tr>
                <tr>
                  <td colspan="2"><h3><br>Order will be executed at :</h3></td>
                </tr>
                <tr>
                  <td colspan="2"><input type="submit" class="submit" value="buy" id="buy" onclick="login()" /></td>
                </tr>
              </table>
            </form>
          </div>


    </div>

</body>

</html>
<script type="text/javascript">
     getData();
let graph_base_point = [];
let y = [];
let oneYearGraph = document.getElementById("graphOneYear");
let sixMonthGraph = document.getElementById("graphSixMonth");
let oneMonthGraph = document.getElementById("graphOneMonth");
async function getData(){
    // let productSymbol = productArr[0].symbol;
    // console.log(productSymbol);
    // let dt = await fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=IBM&apikey=0PTMBKNK94C4NSG5`)
    const url= 'https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=IBM&interval=5min&apikey=0PTMBKNK94C4NS65';
    const response = await fetch(url);
    let data =  await response.json();
    console.log(data["Time Series (Daily)"]);
    appendingData(data["Time Series (Daily)"]);
}
   
    async function appendingData(dt){
    await dt;
    for (let keys in dt){
        graph_base_point.push(keys);
    }
    for ( let i = 0; i < graph_base_point.length; i++){
        y.push(dt[graph_base_point[i]]['4. close']);
    }
    graph_base_point.reverse();
    y.reverse();  
    console.log(graph_base_point);
    console.log(y);
    graph(graph_base_point,y);
}
let sixMonthBase = graph_base_point;
let sixMonthYaxis = y;
let oneMonthBase = graph_base_point;
let oneMonthYaxis = y;



function graph(graph_base_point,y){
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels : graph_base_point,
            datasets: [{
                label: 'NAV',
                data:  y ,
                backgroundColor: [
                    'green',
                ],
                display:false,
                borderColor:[
                    '#313c81',
                ],
                borderWidth: 2,
                radius: 0,
                pointHoverRadius: 7,
                verticalLine: true,
            }]
        },
        options: {
            scales: {
                y: {
                    ticks : {
                        display : false,
                        callback: (value,index,values) => {
                            return '$' + value;
                        }
                    },

                    beginAtZero: false,
                    grid : {
                        display : false,
                        borderColor: 'white',
                    }
                },
                x: {
                    ticks : {
                    display : false
                    },

                    beginAtZero: false,
                    grid : {
                        display : false,
                    }
                }
            }
        }
    });

    oneYearGraph.onclick = () => {
        oneYearGraph.setAttribute("class", "onclicked");
        sixMonthGraph.setAttribute("class", "onNotclicked");
        oneMonthGraph.setAttribute("class", "onNotclicked");
        myChart.destroy();
        oneYearData();
    }

    sixMonthGraph.onclick = () => {
        oneYearGraph.setAttribute("class", "onNotclicked");
        sixMonthGraph.setAttribute("class", "onclicked");
        oneMonthGraph.setAttribute("class", "onNotclicked");
        myChart.destroy();
        sixMonData();
    }

    oneMonthGraph.onclick = () => {
        oneYearGraph.setAttribute("class", "onNotclicked");
        sixMonthGraph.setAttribute("class", "onNotclicked");
        oneMonthGraph.setAttribute("class", "onclicked");
        myChart.destroy();
        oneMonData();
    }
}

function oneYearData(){
    graph(graph_base_point,y);
}

function sixMonData(){
    sixMonthBase = sixMonthBase.slice(0, 20);
    sixMonthYaxis = sixMonthYaxis.slice(0, 20);
    graph(sixMonthBase, sixMonthYaxis);
}

function oneMonData(){
    oneMonthBase = oneMonthBase.slice(0, 20);
    oneMonthYaxis = oneMonthYaxis.slice(0, 20);
    graph(oneMonthBase, oneMonthYaxis);
}

    let addToCartBtn = document.getElementById("addToCartBtn");
    let goToCartBtn = document.getElementById("goToCartBtn");
    let calendarSel = document.getElementById("sipCalInput");

    addToCartBtn.onclick = function(){
        addToCart();
    }
    goToCartBtn.onclick = function(){
        goToCart();
    }
    monthlySip.onclick = function(){
        showMonthlySip();
    }
    oneTime.onclick = function(){
        showOneTime();
    }
    calendarSel.onchange = function(){
        calendar();
    }

</script>
<script src="../script/search_box.js"></script>
<script src="../script/changeNavbar.js"></script>

